(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63097,e=>{"use strict";e.s(["default",()=>o]);var t=e.i(43476),a=e.i(71645),r=e.i(17255),s=e.i(18566),i=e.i(67344),l=e.i(68581);function o(){let{colors:e,gradients:o}=(0,i.useTheme)(),d=(0,s.useSearchParams)().get("mode")||"login",{handleLoginSuccess:c}=(0,l.useLoginSuccessRedirect)();(0,l.useRedirectIfAuthenticated)();let[u,m]=(0,a.useState)(d),[h,x]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),[w,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),[N,k]=(0,a.useState)(""),P=async()=>{k(""),j(!0);try{let e=await (0,r.signIn)("google",{redirect:!1});if(null==e?void 0:e.error)switch(console.error("Google sign-in error:",e.error),e.error){case"OAuthAccountNotLinked":k("This email is already associated with a password-based account. Please sign in with your email and password instead, or contact support.");break;case"OAuthSignin":k("Error occurred during Google sign-in. Please try again.");break;case"OAuthCallback":k("Google authentication failed. Please try again.");break;default:k("Google sign-in failed. Please try again or use email/password.")}else(null==e?void 0:e.ok)&&await c()}catch(e){console.error("Google sign-in catch error:",e),k("An unexpected error occurred. Please try again.")}finally{j(!1)}},C=async()=>{k(""),j(!0);try{let e=await (0,r.signIn)("credentials",{email:g,password:p,redirect:!1});(null==e?void 0:e.error)?(console.error("Credentials login error:",e.error),"CredentialsSignin"===e.error?k("Invalid email or password. Please check your credentials and try again."):k("Login failed. Please check your credentials and try again.")):(null==e?void 0:e.ok)&&await c()}catch(e){console.error("Login catch error:",e),k("An unexpected error occurred. Please try again.")}finally{j(!1)}},S=async()=>{if(k(""),!h.trim())return k("Name is required.");if(!g.trim())return k("Email is required.");if(p.length<6)return k("Password must be at least 6 characters long.");if(p!==w)return k("Passwords do not match.");j(!0);try{let e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.trim(),email:g.trim(),password:p})}),t=await e.json();if(!e.ok)return void(409===e.status?k("An account with this email already exists. Please sign in instead or use a different email."):k(t.error||"Registration failed. Please try again."));let a=await (0,r.signIn)("credentials",{email:g.trim(),password:p,redirect:!1});(null==a?void 0:a.error)?k("Registration successful, but automatic sign-in failed. Please sign in manually."):(null==a?void 0:a.ok)&&await c()}catch(e){console.error("Registration error:",e),k("An unexpected error occurred. Please try again.")}finally{j(!1)}},A=async e=>{e.preventDefault(),"login"===u?await C():await S()};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4 py-8 bg-gradient-to-br ".concat(e.background.main," overflow-x-hidden"),children:(0,t.jsxs)("div",{className:"max-w-md w-full relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -top-8 -left-8 md:-top-16 md:-left-16 h-24 w-24 md:h-40 md:w-40 rounded-full bg-gradient-to-r ".concat(e.background.orb1," blur-2xl md:blur-3xl opacity-20 md:opacity-30")}),(0,t.jsx)("div",{className:"absolute -bottom-8 -right-8 md:-bottom-16 md:-right-16 h-24 w-24 md:h-40 md:w-40 rounded-full bg-gradient-to-r ".concat(e.background.orb2," blur-2xl md:blur-3xl opacity-20 md:opacity-30")}),(0,t.jsxs)("div",{className:"relative z-10 rounded-2xl border border-white/10 ".concat(e.card.background," p-6 sm:p-8 mx-2 sm:mx-0"),children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r ".concat(o.heading.primary," bg-clip-text text-transparent"),children:"login"===u?"Welcome back":"Create your account"}),(0,t.jsx)("p",{className:"".concat(e.text.muted," mt-2 text-sm sm:text-base"),children:"login"===u?"Sign in to continue":"Join SEVIC HITM to get started"})]}),(0,t.jsxs)("button",{onClick:P,disabled:v,className:"w-full inline-flex items-center justify-center gap-2 rounded-lg px-4 py-3 bg-white text-black font-medium hover:opacity-90 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed text-sm sm:text-base shadow-lg hover:shadow-xl",children:[(0,t.jsx)(n,{}),v?"Please wait...":"Continue with Google"]}),(0,t.jsxs)("div",{className:"my-6 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-px flex-1 bg-white/10"}),(0,t.jsx)("span",{className:"".concat(e.text.muted," text-sm"),children:"or"}),(0,t.jsx)("div",{className:"h-px flex-1 bg-white/10"})]}),(0,t.jsxs)("form",{onSubmit:A,className:"space-y-4",children:["register"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-2 ".concat(e.text.secondary),children:"Full name"}),(0,t.jsx)("input",{id:"name",type:"text",value:h,onChange:e=>x(e.target.value),required:!0,disabled:v,className:"w-full rounded-lg px-3 py-3 bg-white/5 border border-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/60 focus:border-emerald-400/60 transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-2 ".concat(e.text.secondary),children:"Email address"}),(0,t.jsx)("input",{id:"email",type:"email",value:g,onChange:e=>b(e.target.value),required:!0,disabled:v,className:"w-full rounded-lg px-3 py-3 bg-white/5 border border-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/60 focus:border-emerald-400/60 transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your email"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 ".concat(e.text.secondary),children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:p,onChange:e=>f(e.target.value),required:!0,disabled:v,minLength:6,className:"w-full rounded-lg px-3 py-3 bg-white/5 border border-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/60 focus:border-emerald-400/60 transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your password"}),"register"===u&&(0,t.jsx)("p",{className:"mt-1 text-xs ".concat(e.text.muted),children:"Password must be at least 6 characters long"})]}),"register"===u&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirm",className:"block text-sm font-medium mb-2 ".concat(e.text.secondary),children:"Confirm password"}),(0,t.jsx)("input",{id:"confirm",type:"password",value:w,onChange:e=>y(e.target.value),required:!0,disabled:v,className:"w-full rounded-lg px-3 py-3 bg-white/5 border border-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/60 focus:border-emerald-400/60 transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Confirm your password"})]}),N&&(0,t.jsx)("div",{className:"rounded-lg bg-red-500/10 border border-red-500/20 p-3 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})}),(0,t.jsx)("p",{className:"text-sm text-red-300 leading-relaxed",children:N})]})}),(0,t.jsx)("button",{type:"submit",disabled:v,className:"w-full rounded-lg px-4 py-3 bg-gradient-to-r from-emerald-500 to-green-600 text-white font-medium hover:from-emerald-600 hover:to-green-700 hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none text-sm sm:text-base",children:v?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Please wait..."]}):"login"===u?"Sign in":"Create account"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)("button",{onClick:()=>{k(""),x(""),b(""),f(""),y(""),m("login"===u?"register":"login")},disabled:v,className:"text-sm ".concat(e.text.secondary," underline decoration-emerald-400/40 hover:decoration-emerald-300 hover:").concat(e.text.primary," transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"),children:"login"===u?"Don't have an account? Create one":"Already have an account? Sign in"})}),"register"===u&&(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("p",{className:"text-xs ".concat(e.text.muted," leading-relaxed"),children:"By creating an account, you agree to our Terms of Service and Privacy Policy."})})]})]})})}function n(){return(0,t.jsxs)("svg",{className:"h-5 w-5 flex-shrink-0",viewBox:"0 0 533.5 544.3",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,t.jsx)("path",{fill:"#4285f4",d:"M533.5 278.4c0-18.6-1.7-36.5-4.9-53.7H272v101.7h147c-6.3 34-25.1 62.8-53.6 82v67h86.7c50.7-46.7 81.4-115.6 81.4-197z"}),(0,t.jsx)("path",{fill:"#34a853",d:"M272 544.3c72.6 0 133.6-24 178.2-64.9l-86.7-67c-24.1 16.2-55 25.8-91.5 25.8-70.3 0-129.9-47.5-151.2-111.3H31.2v69.9C75.3 485.6 167.9 544.3 272 544.3z"}),(0,t.jsx)("path",{fill:"#fbbc04",d:"M120.8 326.9c-9.5-28.3-9.5-59.3 0-87.6V169.4H31.2c-39 77.9-39 170.5 0 248.4l89.6-70.9z"}),(0,t.jsx)("path",{fill:"#ea4335",d:"M272 107.7c39.6-.6 77.1 14.3 105.8 41.7l79-79C410.8 27.1 345.4 0 272 0 167.9 0 75.3 58.7 31.2 169.4l89.6 69.9C142.1 155.2 201.7 107.7 272 107.7z"})]})}}]);